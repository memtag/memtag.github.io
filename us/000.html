<!DOCTYPE html><html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Перевірка користувачів</title>
    <script>
        async function checkUser() {
            const response = await fetch('users.txt');
            const text = await response.text();
            const users = text.split('\n').map(line => line.trim()).filter(line => line);const filename = window.location.pathname.split('/').pop().split('.')[0]; // Отримуємо назву файлу без розширення
        
        const userEntry = users.find(u => u.startsWith(filename + ' '));
        if (!userEntry) {
            window.close();
            return;
        }
        
        const urlMatch = userEntry.match(/url=(.*?)/);
        const pMatch = userEntry.match(/p=(\d+)/);
        const eMatch = userEntry.match(/e=(\d+)/);
        
        const targetUrl = urlMatch ? urlMatch[1] : null;
        const redirect = pMatch ? pMatch[1] === '1' : false;
        const block = eMatch ? eMatch[1] === '1' : false;
        
        if (block) {
            window.location.href = 'block.html';
            return;
        }
        
        if (redirect && targetUrl) {
            window.location.href = targetUrl;
        } else {
            window.close();
        }
    }
    
    window.onload = checkUser;
</script>

</head>
<body>
</body>
</html>

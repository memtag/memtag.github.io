<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timer Sound</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(145deg, #0e0e0e, #1b1b1b);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    gap: 1.2rem;
    text-align: center;
  }
  h2 {
    font-size: 1.7rem;
    color: #00aaff;
    text-shadow: 0 0 5px #0077ff88;
  }
  select, input, button {
    font-size: 1rem;
    padding: 0.6rem 0.8rem;
    border-radius: 0.6rem;
    border: none;
    outline: none;
    background: #222;
    color: #fff;
    transition: 0.2s;
  }
  select:focus, input:focus {
    box-shadow: 0 0 5px #00aaff;
  }
  button {
    background: #00aaff;
    color: white;
    cursor: pointer;
    padding: 0.7rem 1.4rem;
    border-radius: 0.8rem;
    font-weight: bold;
  }
  button:hover {
    background: #0095dd;
  }
  .time-controls {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    justify-content: center;
  }
  .lang-select {
    position: absolute;
    top: 1rem;
    right: 1rem;
  }
  .links {
    position: absolute;
    bottom: 1rem;
    display: flex;
    gap: 1rem;
  }
  .links a {
    color: white;
    background: #333;
    padding: 0.6rem 1.2rem;
    border-radius: 0.7rem;
    text-decoration: none;
    font-weight: 500;
    transition: 0.3s;
  }
  .links a:hover {
    background: #00aaff;
  }
</style>
</head>
<body>

<div class="lang-select">
  <select id="lang">
    <option value="en">üá¨üáß English</option>
    <option value="uk">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
    <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
  </select>
</div>

<h2 id="title">Create timer-sound</h2>

<label id="sound-label" for="sound">Choose sound:</label>
<select id="sound"></select>

<label id="time-label" for="time">Choose time:</label>
<div class="time-controls">
  <input type="range" id="slider" min="1" max="59" value="10">
  <input type="number" id="timeValue" value="10" min="1" max="59">
  <select id="unit">
    <option value="s">s</option>
    <option value="m">m</option>
    <option value="h">h</option>
  </select>
</div>

<p id="orText">or enter exact time:</p>
<input type="time" id="exactTime" step="1">

<button id="createBtn">Create</button>

<div class="links">
  <a href="https://www.tiktok.com/@mem.tag" target="_blank">TikTok</a>
  <a href="https://t.me/mem_soundtag" target="_blank">Telegram</a>
</div>

<script>
const langData = {
  en: {
    title: "Create timer-sound",
    sound: "Choose sound:",
    time: "Choose time:",
    or: "or enter exact time:",
    create: "Create"
  },
  uk: {
    title: "–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–π–º–µ—Ä-–∑–≤—É–∫",
    sound: "–û–±–µ—Ä—ñ—Ç—å –∑–≤—É–∫:",
    time: "–û–±–µ—Ä—ñ—Ç—å —á–∞—Å:",
    or: "–∞–±–æ –≤–≤–µ–¥—ñ—Ç—å —Ç–æ—á–Ω–∏–π —á–∞—Å:",
    create: "–°—Ç–≤–æ—Ä–∏—Ç–∏"
  },
  ru: {
    title: "–°–æ–∑–¥–∞—Ç—å —Ç–∞–π–º–µ—Ä-–∑–≤—É–∫",
    sound: "–í—ã–±–µ—Ä–∏—Ç–µ –∑–≤—É–∫:",
    time: "–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è:",
    or: "–∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è:",
    create: "–°–æ–∑–¥–∞—Ç—å"
  }
};

// –∞–≤—Ç–æ-–≤–∏–±—ñ—Ä –º–æ–≤–∏
const userLang = navigator.language.startsWith('uk') ? 'uk' :
                 navigator.language.startsWith('ru') ? 'ru' : 'en';
const langSelect = document.getElementById("lang");
langSelect.value = userLang;
applyLang(userLang);

langSelect.addEventListener("change", e => applyLang(e.target.value));

function applyLang(code) {
  const l = langData[code];
  document.getElementById("title").textContent = l.title;
  document.getElementById("sound-label").textContent = l.sound;
  document.getElementById("time-label").textContent = l.time;
  document.getElementById("orText").textContent = l.or;
  document.getElementById("createBtn").textContent = l.create;
}

// –ø—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è snd.txt
async function loadSounds() {
  try {
    const res = await fetch("snd.txt");
    const text = await res.text();
    const lines = text.split(/\r?\n/).filter(l => l.trim());
    const select = document.getElementById("sound");
    for (let line of lines) {
      const name = line.match(/name="(.*?)"/)?.[1];
      const page = line.match(/page="(.*?)"/)?.[1];
      if (name && page) {
        const opt = document.createElement("option");
        opt.textContent = name;
        opt.value = page;
        select.appendChild(opt);
      }
    }
  } catch {
    alert("Could not load snd.txt");
  }
}
loadSounds();

const slider = document.getElementById("slider");
const timeValue = document.getElementById("timeValue");
const unit = document.getElementById("unit");

slider.addEventListener("input", () => {
  timeValue.value = slider.value;
});
timeValue.addEventListener("input", () => {
  if (timeValue.value > 59) timeValue.value = 59;
  slider.value = timeValue.value;
});

document.getElementById("createBtn").addEventListener("click", () => {
  const soundPage = document.getElementById("sound").value;
  const exact = document.getElementById("exactTime").value;
  let t = "";

  if (exact) {
    t = exact;
  } else {
    const val = Number(timeValue.value);
    const u = unit.value;
    t = val + u;
  }

  if (!soundPage || !t) {
    alert("Please select sound and time!");
    return;
  }

  const url = `https://memtag.github.io/${soundPage}/t?t=${encodeURIComponent(t)}`;
  window.location.href = url;
});
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–¢–∞–π–º–µ—Ä-–∑–≤—É–∫</title>
<style>
  body {
    font-family: sans-serif;
    background: #111;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    padding: 2rem;
  }
  select, input, button {
    font-size: 1rem;
    padding: 0.4rem 0.6rem;
    border-radius: 0.5rem;
    border: none;
  }
  select, input {
    background: #222;
    color: #fff;
  }
  button {
    background: #008cff;
    color: white;
    cursor: pointer;
  }
  .time-controls {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  .lang-select {
    position: absolute;
    top: 1rem;
    right: 1rem;
  }
</style>
</head>
<body>

<div class="lang-select">
  <select id="lang">
    <option value="uk">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
    <option value="en">üá¨üáß English</option>
    <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
  </select>
</div>

<h2 id="title">–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–π–º–µ—Ä-–∑–≤—É–∫</h2>

<label id="sound-label" for="sound">–û–±–µ—Ä—ñ—Ç—å –∑–≤—É–∫:</label>
<select id="sound"></select>

<label id="time-label" for="time">–û–±–µ—Ä—ñ—Ç—å —á–∞—Å:</label>
<div class="time-controls">
  <input type="range" id="slider" min="1" max="3600" value="60">
  <input type="number" id="timeValue" value="60" min="1">
  <select id="unit">
    <option value="s">s</option>
    <option value="m">m</option>
    <option value="h">h</option>
  </select>
</div>

<p id="orText">–∞–±–æ –≤–≤–µ–¥—ñ—Ç—å —Ç–æ—á–Ω–∏–π —á–∞—Å:</p>
<input type="time" id="exactTime" step="1">

<button id="createBtn">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>

<script>
const langData = {
  uk: {
    title: "–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–π–º–µ—Ä-–∑–≤—É–∫",
    sound: "–û–±–µ—Ä—ñ—Ç—å –∑–≤—É–∫:",
    time: "–û–±–µ—Ä—ñ—Ç—å —á–∞—Å:",
    or: "–∞–±–æ –≤–≤–µ–¥—ñ—Ç—å —Ç–æ—á–Ω–∏–π —á–∞—Å:",
    create: "–°—Ç–≤–æ—Ä–∏—Ç–∏"
  },
  en: {
    title: "Create timer-sound",
    sound: "Choose sound:",
    time: "Choose time:",
    or: "or enter exact time:",
    create: "Create"
  },
  ru: {
    title: "–°–æ–∑–¥–∞—Ç—å —Ç–∞–π–º–µ—Ä-–∑–≤—É–∫",
    sound: "–í—ã–±–µ—Ä–∏—Ç–µ –∑–≤—É–∫:",
    time: "–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è:",
    or: "–∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è:",
    create: "–°–æ–∑–¥–∞—Ç—å"
  }
};

document.getElementById("lang").addEventListener("change", e => {
  const l = langData[e.target.value];
  document.getElementById("title").textContent = l.title;
  document.getElementById("sound-label").textContent = l.sound;
  document.getElementById("time-label").textContent = l.time;
  document.getElementById("orText").textContent = l.or;
  document.getElementById("createBtn").textContent = l.create;
});

// –ø—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è snd.txt
async function loadSounds() {
  try {
    const res = await fetch("snd.txt");
    const text = await res.text();
    const lines = text.split(/\r?\n/).filter(l => l.trim());
    const select = document.getElementById("sound");
    for (let line of lines) {
      const name = line.match(/name="(.*?)"/)?.[1];
      const page = line.match(/page="(.*?)"/)?.[1];
      if (name && page) {
        const opt = document.createElement("option");
        opt.textContent = name;
        opt.value = page;
        select.appendChild(opt);
      }
    }
  } catch {
    alert("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ snd.txt");
  }
}
loadSounds();

const slider = document.getElementById("slider");
const timeValue = document.getElementById("timeValue");
const unit = document.getElementById("unit");

slider.addEventListener("input", () => {
  timeValue.value = slider.value;
});

timeValue.addEventListener("input", () => {
  slider.value = timeValue.value;
});

document.getElementById("createBtn").addEventListener("click", () => {
  const soundPage = document.getElementById("sound").value;
  const exact = document.getElementById("exactTime").value;
  let t = "";

  if (exact) {
    t = exact;
  } else {
    const val = Number(timeValue.value);
    const u = unit.value;
    t = val + u;
  }

  if (!soundPage || !t) {
    alert("–û–±–µ—Ä—ñ—Ç—å –∑–≤—É–∫ —ñ —á–∞—Å!");
    return;
  }

  const url = `https://memtag.github.io/${soundPage}/?t=${encodeURIComponent(t)}`;
  window.location.href = url;
});
</script>
</body>
</html>
